/*C1*/SET SCHEMA PUBLIC
CONNECT USER SA
DISCONNECT
/*C2*/SET SCHEMA PUBLIC
CONNECT USER SA
create table Artikel (id integer generated by default as identity (start with 1), version integer, abbildung varchar(255), beschreibung longvarchar, kategorie integer not null, kurzbezeichnung varchar(30) not null, preis numeric not null, VERANSTALTUNG_ID integer, primary key (id))
create table Auffuehrung (id integer generated by default as identity (start with 1), version integer, datumuhrzeit timestamp not null, hinweis varchar(255), preis integer not null, storniert bit not null, SAAL_ID integer, VERANSTALTUNG_ID integer, primary key (id))
create table BestellPosition (id integer generated by default as identity (start with 1), version integer, menge integer not null, ARTIKEL_ID integer, BESTELLUNG_ID integer, primary key (id))
create table Bestellung (id integer generated by default as identity (start with 1), version integer, anmerkungen longvarchar, bestellzeitpunkt date not null, bezahlt bit not null, versandt bit not null, zahlungsart integer not null, KUNDE_ID integer, primary key (id))
create table Engagement (id integer generated by default as identity (start with 1), version integer, funktion varchar(255), gage numeric, KUENSTLER_ID integer, VERANSTALTUNG_ID integer, primary key (id))
create table Kategorie (id integer generated by default as identity (start with 1), version integer, bezeichnung varchar(30) not null, preismax numeric, preismin numeric, preisstd numeric, primary key (id))
create table Kuenstler (id integer generated by default as identity (start with 1), version integer, biographie longvarchar, geburtsdatum date, geschlecht integer not null, nachname varchar(50) not null, titel varchar(30), vorname varchar(50) not null, primary key (id))
create table News (id integer generated by default as identity (start with 1), version integer, datum date not null, text longvarchar, titel varchar(100) not null, ORT_ID integer, primary key (id))
create table Ort (id integer generated by default as identity (start with 1), version integer, land varchar(40), ort varchar(50) not null, plz varchar(5) not null, strasse varchar(80) not null, besitzer varchar(40), bezeichnung varchar(50) not null, kiosk bit not null, oeffnungszeiten varchar(255), telnr varchar(30), typ integer not null, verkaufsstelle bit not null, primary key (id))
create table PERSON (TYP varchar(31) not null, id integer generated by default as identity (start with 1), version integer, land varchar(40), ort varchar(50) not null, plz varchar(5) not null, strasse varchar(80) not null, blz varchar(255), email varchar(255), geburtsdatum date, geschlecht integer not null, kontonr varchar(255), nachname varchar(50) not null, telnr varchar(255), titel varchar(30), vorname varchar(30) not null, ermaechtigung bit, ermaessigung numeric, gesperrt bit, gruppe integer not null, kontolimit numeric, kontostand numeric, kreditkarteGueltigBis date, kreditkartennr varchar(16), kreditkartentyp integer, onlinepwd varchar(20), ticketcardGueltigBis date, ticketcardnr varchar(20), vorlieben varchar(255), berechtigung integer not null, passwort varchar(20) not null, username varchar(50) not null, ORT_ID integer, primary key (id))
create table Platz (id integer generated by default as identity (start with 1), version integer, nummer integer not null, status integer not null, AUFFUEHRUNG_ID integer, KATEGORIE_ID integer, REIHE_ID integer, TRANSAKTION_ID integer, primary key (id))
create table Reihe (id integer generated by default as identity (start with 1), version integer, anzplaetze integer not null, bezeichnung varchar(255) not null, sitzplatz bit not null, startplatz integer not null, KATEGORIE_ID integer, SAAL_ID integer, primary key (id))
create table Saal (id integer generated by default as identity (start with 1), version integer, bezeichnung varchar(80) not null, kostenprotag numeric, ORT_ID integer, primary key (id))
create table Transaktion (id integer generated by default as identity (start with 1), version integer, datumuhrzeit date not null, reservierungsnr integer, status integer not null, zahlungsart integer not null, KUNDE_ID integer, MITARBEITER_ID integer, primary key (id))
create table Veranstaltung (id integer generated by default as identity (start with 1), version integer, abbildung varchar(100), bewertung varchar(255), bezeichnung varchar(30) not null, dauer integer not null, freigabe varchar(30), hinweis varchar(255), inhalt longvarchar, jahrerstellung integer, kategorie varchar(30) not null, kritik varchar(255), spracheton varchar(30), spracheut varchar(30), subkategorie varchar(30), primary key (id))
alter table Artikel add constraint FK3791820C1896F182 foreign key (VERANSTALTUNG_ID) references Veranstaltung
alter table Auffuehrung add constraint FKCA1FE080A5260292 foreign key (SAAL_ID) references Saal
alter table Auffuehrung add constraint FKCA1FE0801896F182 foreign key (VERANSTALTUNG_ID) references Veranstaltung
alter table BestellPosition add constraint FK72EEDC6ABECF3FC2 foreign key (ARTIKEL_ID) references Artikel
alter table BestellPosition add constraint FK72EEDC6AF0E96012 foreign key (BESTELLUNG_ID) references Bestellung
alter table Bestellung add constraint FKCEE7352DF7E6EF22 foreign key (KUNDE_ID) references PERSON
alter table Engagement add constraint FK198E345F33572722 foreign key (KUENSTLER_ID) references Kuenstler
alter table Engagement add constraint FK198E345F1896F182 foreign key (VERANSTALTUNG_ID) references Veranstaltung
alter table News add constraint FK24FEF3F73651A2 foreign key (ORT_ID) references Ort
alter table PERSON add constraint FK8C768F55F73651A2 foreign key (ORT_ID) references Ort
alter table Platz add constraint FK499EB0B505F4982 foreign key (TRANSAKTION_ID) references Transaktion
alter table Platz add constraint FK499EB0B6B073742 foreign key (AUFFUEHRUNG_ID) references Auffuehrung
alter table Platz add constraint FK499EB0B78B6E462 foreign key (REIHE_ID) references Reihe
alter table Platz add constraint FK499EB0BBAA040E2 foreign key (KATEGORIE_ID) references Kategorie
alter table Reihe add constraint FK4B307F3BAA040E2 foreign key (KATEGORIE_ID) references Kategorie
alter table Reihe add constraint FK4B307F3A5260292 foreign key (SAAL_ID) references Saal
alter table Saal add constraint FK273319F73651A2 foreign key (ORT_ID) references Ort
alter table Transaktion add constraint FKE37B36C6F7E6EF22 foreign key (KUNDE_ID) references PERSON
alter table Transaktion add constraint FKE37B36C69E93A8C2 foreign key (MITARBEITER_ID) references PERSON
/*C3*/SET SCHEMA PUBLIC
CONNECT USER SA
/*C2*/SET AUTOCOMMIT FALSE
/*C3*/SET AUTOCOMMIT FALSE
/*C2*/SET AUTOCOMMIT TRUE
/*C3*/SET AUTOCOMMIT TRUE
DISCONNECT
/*C2*/DISCONNECT
/*C4*/SET SCHEMA PUBLIC
CONNECT USER SA
DISCONNECT
/*C5*/SET SCHEMA PUBLIC
CONNECT USER SA
/*C6*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
/*C5*/SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
/*C6*/SET AUTOCOMMIT TRUE
DISCONNECT
/*C5*/DISCONNECT
/*C7*/SET SCHEMA PUBLIC
CONNECT USER SA
DISCONNECT
/*C8*/SET SCHEMA PUBLIC
CONNECT USER SA
/*C9*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
/*C8*/SET AUTOCOMMIT FALSE
/*C9*/SET AUTOCOMMIT TRUE
/*C8*/SET AUTOCOMMIT TRUE
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
DISCONNECT
/*C9*/DISCONNECT
